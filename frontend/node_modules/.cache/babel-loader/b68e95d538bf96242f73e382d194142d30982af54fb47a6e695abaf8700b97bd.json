{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport { Client } from '@stomp/stompjs';\nclass NotificationService {\n  constructor() {\n    this.stompClient = null;\n    this.connected = false;\n  }\n  connect(callback) {\n    const socketFactory = () => new SockJS('http://localhost:8080/ws');\n    this.stompClient = new Client({\n      webSocketFactory: socketFactory,\n      reconnectDelay: 5000,\n      heartbeatIncoming: 4000,\n      heartbeatOutgoing: 4000,\n      onConnect: () => {\n        this.connected = true;\n        console.log('Connected to WebSocket');\n        this.stompClient.subscribe('/topic/notifications', message => {\n          const notification = JSON.parse(message.body);\n          callback({\n            type: 'new_request',\n            data: notification\n          });\n        });\n      },\n      onStompError: frame => {\n        console.error('STOMP error:', frame.headers['message'], frame.body);\n        this.connected = false;\n      },\n      onWebSocketClose: () => {\n        this.connected = false;\n        console.warn('WebSocket connection closed');\n      },\n      debug: str => {\n        console.log('STOMP Debug:', str);\n      }\n    });\n    this.stompClient.activate();\n  }\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n      this.connected = false;\n      console.log('Disconnected from WebSocket');\n    }\n  }\n  isConnected() {\n    return this.connected;\n  }\n}\nconst notificationService = new NotificationService();\nexport default notificationService;","map":{"version":3,"names":["SockJS","Client","NotificationService","constructor","stompClient","connected","connect","callback","socketFactory","webSocketFactory","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","onConnect","console","log","subscribe","message","notification","JSON","parse","body","type","data","onStompError","frame","error","headers","onWebSocketClose","warn","debug","str","activate","disconnect","deactivate","isConnected","notificationService"],"sources":["/Users/admin/happygo/frontend/src/services/NotificationService.js"],"sourcesContent":["import SockJS from 'sockjs-client';\nimport { Client } from '@stomp/stompjs';\n\nclass NotificationService {\n  constructor() {\n    this.stompClient = null;\n    this.connected = false;\n  }\n\n  connect(callback) {\n    const socketFactory = () => new SockJS('http://localhost:8080/ws');\n    \n    this.stompClient = new Client({\n      webSocketFactory: socketFactory,\n      reconnectDelay: 5000,\n      heartbeatIncoming: 4000,\n      heartbeatOutgoing: 4000,\n      onConnect: () => {\n        this.connected = true;\n        console.log('Connected to WebSocket');\n        \n        this.stompClient.subscribe('/topic/notifications', (message) => {\n          const notification = JSON.parse(message.body);\n          callback({\n            type: 'new_request',\n            data: notification\n          });\n        });\n      },\n      onStompError: (frame) => {\n        console.error('STOMP error:', frame.headers['message'], frame.body);\n        this.connected = false;\n      },\n      onWebSocketClose: () => {\n        this.connected = false;\n        console.warn('WebSocket connection closed');\n      },\n      debug: (str) => {\n        console.log('STOMP Debug:', str);\n      }\n    });\n    \n    this.stompClient.activate();\n  }\n\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.deactivate();\n      this.connected = false;\n      console.log('Disconnected from WebSocket');\n    }\n  }\n\n  isConnected() {\n    return this.connected;\n  }\n}\n\nconst notificationService = new NotificationService();\nexport default notificationService;\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,eAAe;AAClC,SAASC,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,mBAAmB,CAAC;EACxBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,SAAS,GAAG,KAAK;EACxB;EAEAC,OAAOA,CAACC,QAAQ,EAAE;IAChB,MAAMC,aAAa,GAAGA,CAAA,KAAM,IAAIR,MAAM,CAAC,0BAA0B,CAAC;IAElE,IAAI,CAACI,WAAW,GAAG,IAAIH,MAAM,CAAC;MAC5BQ,gBAAgB,EAAED,aAAa;MAC/BE,cAAc,EAAE,IAAI;MACpBC,iBAAiB,EAAE,IAAI;MACvBC,iBAAiB,EAAE,IAAI;MACvBC,SAAS,EAAEA,CAAA,KAAM;QACf,IAAI,CAACR,SAAS,GAAG,IAAI;QACrBS,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;QAErC,IAAI,CAACX,WAAW,CAACY,SAAS,CAAC,sBAAsB,EAAGC,OAAO,IAAK;UAC9D,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,IAAI,CAAC;UAC7Cd,QAAQ,CAAC;YACPe,IAAI,EAAE,aAAa;YACnBC,IAAI,EAAEL;UACR,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC;MACDM,YAAY,EAAGC,KAAK,IAAK;QACvBX,OAAO,CAACY,KAAK,CAAC,cAAc,EAAED,KAAK,CAACE,OAAO,CAAC,SAAS,CAAC,EAAEF,KAAK,CAACJ,IAAI,CAAC;QACnE,IAAI,CAAChB,SAAS,GAAG,KAAK;MACxB,CAAC;MACDuB,gBAAgB,EAAEA,CAAA,KAAM;QACtB,IAAI,CAACvB,SAAS,GAAG,KAAK;QACtBS,OAAO,CAACe,IAAI,CAAC,6BAA6B,CAAC;MAC7C,CAAC;MACDC,KAAK,EAAGC,GAAG,IAAK;QACdjB,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEgB,GAAG,CAAC;MAClC;IACF,CAAC,CAAC;IAEF,IAAI,CAAC3B,WAAW,CAAC4B,QAAQ,CAAC,CAAC;EAC7B;EAEAC,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAAC7B,WAAW,EAAE;MACpB,IAAI,CAACA,WAAW,CAAC8B,UAAU,CAAC,CAAC;MAC7B,IAAI,CAAC7B,SAAS,GAAG,KAAK;MACtBS,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC5C;EACF;EAEAoB,WAAWA,CAAA,EAAG;IACZ,OAAO,IAAI,CAAC9B,SAAS;EACvB;AACF;AAEA,MAAM+B,mBAAmB,GAAG,IAAIlC,mBAAmB,CAAC,CAAC;AACrD,eAAekC,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
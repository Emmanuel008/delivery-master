{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport { Stomp } from 'stompjs';\nclass NotificationService {\n  constructor() {\n    this.stompClient = null;\n    this.connected = false;\n  }\n  connect(callback) {\n    const socket = new SockJS('http://localhost:8080/ws');\n    this.stompClient = Stomp.over(socket);\n    this.stompClient.connect({}, () => {\n      this.connected = true;\n      console.log('Connected to WebSocket');\n\n      // Subscribe to notifications\n      this.stompClient.subscribe('/topic/notifications', message => {\n        const notification = JSON.parse(message.body);\n        callback({\n          type: 'new_request',\n          data: notification\n        });\n      });\n    }, error => {\n      console.error('WebSocket connection error:', error);\n      this.connected = false;\n    });\n  }\n  disconnect() {\n    if (this.stompClient && this.connected) {\n      this.stompClient.disconnect();\n      this.connected = false;\n      console.log('Disconnected from WebSocket');\n    }\n  }\n  isConnected() {\n    return this.connected;\n  }\n}\nexport default new NotificationService();","map":{"version":3,"names":["SockJS","Stomp","NotificationService","constructor","stompClient","connected","connect","callback","socket","over","console","log","subscribe","message","notification","JSON","parse","body","type","data","error","disconnect","isConnected"],"sources":["/Users/admin/happygo/frontend/src/services/NotificationService.js"],"sourcesContent":["import SockJS from 'sockjs-client';\nimport { Stomp } from 'stompjs';\n\nclass NotificationService {\n  constructor() {\n    this.stompClient = null;\n    this.connected = false;\n  }\n\n  connect(callback) {\n    const socket = new SockJS('http://localhost:8080/ws');\n    this.stompClient = Stomp.over(socket);\n    \n    this.stompClient.connect({}, () => {\n      this.connected = true;\n      console.log('Connected to WebSocket');\n      \n      // Subscribe to notifications\n      this.stompClient.subscribe('/topic/notifications', (message) => {\n        const notification = JSON.parse(message.body);\n        callback({\n          type: 'new_request',\n          data: notification\n        });\n      });\n    }, (error) => {\n      console.error('WebSocket connection error:', error);\n      this.connected = false;\n    });\n  }\n\n  disconnect() {\n    if (this.stompClient && this.connected) {\n      this.stompClient.disconnect();\n      this.connected = false;\n      console.log('Disconnected from WebSocket');\n    }\n  }\n\n  isConnected() {\n    return this.connected;\n  }\n}\n\nexport default new NotificationService();\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,eAAe;AAClC,SAASC,KAAK,QAAQ,SAAS;AAE/B,MAAMC,mBAAmB,CAAC;EACxBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,SAAS,GAAG,KAAK;EACxB;EAEAC,OAAOA,CAACC,QAAQ,EAAE;IAChB,MAAMC,MAAM,GAAG,IAAIR,MAAM,CAAC,0BAA0B,CAAC;IACrD,IAAI,CAACI,WAAW,GAAGH,KAAK,CAACQ,IAAI,CAACD,MAAM,CAAC;IAErC,IAAI,CAACJ,WAAW,CAACE,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM;MACjC,IAAI,CAACD,SAAS,GAAG,IAAI;MACrBK,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;;MAErC;MACA,IAAI,CAACP,WAAW,CAACQ,SAAS,CAAC,sBAAsB,EAAGC,OAAO,IAAK;QAC9D,MAAMC,YAAY,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,IAAI,CAAC;QAC7CV,QAAQ,CAAC;UACPW,IAAI,EAAE,aAAa;UACnBC,IAAI,EAAEL;QACR,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,EAAGM,KAAK,IAAK;MACZV,OAAO,CAACU,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnD,IAAI,CAACf,SAAS,GAAG,KAAK;IACxB,CAAC,CAAC;EACJ;EAEAgB,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAACjB,WAAW,IAAI,IAAI,CAACC,SAAS,EAAE;MACtC,IAAI,CAACD,WAAW,CAACiB,UAAU,CAAC,CAAC;MAC7B,IAAI,CAAChB,SAAS,GAAG,KAAK;MACtBK,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC5C;EACF;EAEAW,WAAWA,CAAA,EAAG;IACZ,OAAO,IAAI,CAACjB,SAAS;EACvB;AACF;AAEA,eAAe,IAAIH,mBAAmB,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}